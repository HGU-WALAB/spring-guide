# 🌟 Spring MVC 웹 애플리케이션에서 쓰리 레이어 아키텍처 만들기

이 글에서는 Spring MVC 웹 애플리케이션에서 쓰리 레이어 아키텍처를 만드는 방법에 대해 논의할 것입니다.

## 📚 이 글에서 논의할 내용:

1. 쓰리 티어(쓰리 레이어) 아키텍처
2. 쓰리 티어(쓰리 레이어) 아키텍처 VS MVC 패턴
3. Spring MVC 웹 애플리케이션에서 쓰리 레이어 아키텍처를 사용하는 방법

### 🏗 쓰리 티어(쓰리 레이어) 아키텍처

3-tier architecture는 모든 계층이 3개의 논리 계층으로 분할되는 아키텍처 패턴입니다.

- **프레젠테이션 레이어**: 이는 애플리케이션의 사용자 인터페이스로, 사용자에게 애플리케이션의 기능과 데이터를 제공합니다.
- **비즈니스 로직(또는 애플리케이션) 레이어**: 이 레이어는 애플리케이션의 핵심 기능을 구동하는 비즈니스 로직을 포함합니다. 예를 들면 결정, 계산, 평가 및 다른 두 레이어 사이의 데이터 처리 등입니다.
- **데이터 액세스 레이어(또는 데이터) 레이어**: 이 레이어는 데이터베이스와 상호작용하여 애플리케이션 데이터를 저장하고 복원하는 책임을 집니다.

#### 예시

웹 어플리케이션을 사용하여 해당 지역에서 영화 시간을 찾고 있다고 가정하면:

1. 프레젠테이션 계층에는 동영상을 보려는 날짜 등을 선택하는 웹 페이지 표시
2. 입력한 정보는 비즈니스 레이어로 전달되고 조회 쿼리를 생성해서 데이터 액세스 레이어로 전달
3. 데이터 액세스 레이어는 쿼리를 실행하고 결과를 비즈니스 레이어 계층으로 리턴
4. 비즈니스 레이어는 결과를 웹 페이지에 구성
5. 페이지가 브라우저로 다시 전송되고 프레젠테이션 레이어가 laptop 또는 타 장치에 페이지를 표시한다.

출처:

- [3-Tier Architecture 정의 및 구성방식](https://sunrise-min.tistory.com/entry/3-Tier-Architecture-%EC%A0%95%EC%9D%98-%EB%B0%8F-%EA%B5%AC%EC%84%B1%EB%B0%A9%EC%8B%9D)
- 내가 보기 위한 기록:티스토리

### ⚖️ 쓰리 티어(쓰리 레이어) 아키텍처 VS MVC 패턴

MVC 패턴은 이름에서 알 수 있듯이 세 개의 레이어를 가집니다:

- **모델 레이어**: 시스템의 비즈니스 로직을 포함하는 데이터 레이어이며, 애플리케이션의 상태를 나타냅니다. 이는 프레젠테이션 레이어와 독립적이며, 컨트롤러는 모델 레이어에서 데이터를 가져와서 뷰 레이어로 보냅니다.
- **컨트롤러 레이어**: 컨트롤러 레이어는 뷰와 모델 사이의 인터페이스 역할을 합니다. 이는 뷰 레이어에서 요청을 받고 처리하며, 필요한 검증을 포함합니다.
- **뷰 레이어**: 애플리케이션의 출력을 나타내며, 보통 어떤 형태의 UI입니다. 프레젠테이션 레이어는 컨트롤러에 의해 가져온 모델 데이터를 표시하는 데 사용됩니다.

### 🛠 Spring MVC 웹 애플리케이션에서 쓰리 레이어 아키텍처를 사용하는 방법

- **프레젠테이션 레이어로서의 컨트롤러 클래스**: 이 레이어를 가능한 한 얇게 유지하고 MVC 작업의 메커니즘에 한정시켜야 합니다. 예를 들어, 입력을 받고 검증하고, 모델 객체를 조작하고, 적절한 ModelAndView 객체를 반환하는 등의 작업이 여기에 해당합니다. 모든 비즈니스 관련 작업은 서비스 클래스에서 수행되어야 합니다. 컨트롤러 클래스는 보통 컨트롤러 패키지에 놓입니다.
- **비즈니스 로직 레이어로서의 서비스 클래스**: 계산, 데이터 변환, 데이터 처리 및 레코드 간 검증(비즈니스 규칙)은 보통 이 레이어에서 수행됩니다. 이들은 컨트롤러 클래스에 의해 호출되며, 리포지토리나 다른 서비스를 호출할 수도 있습니다. 서비스 클래스는 보통 서비스 패키지에 놓입니다.
- **데이터 액세스 레이어로서의 리포지토리 클래스**: 이 레이어의 책임은 일반적으로 관계형 또는 비관계형 데이터베이스인 데이터 소스에 대한 생성, 검색, 업데이트 및 삭제(CRUD) 작업으로 제한됩니다. 리포지토리 클래스는 보통 리포지토리 패키지에 놓입니다.

#### 예시

Spring boot와 thymeleaf를 사용하는 아래 Spring MVC 웹 애플리케이션을 고려해 보세요. 우리는 쓰리 레이어 아키텍처를 만들었으며 각 레이어는 해당하는 패키지에 매핑되어 있습니다.

- **프레젠테이션 레이어**: 컨트롤러 패키지
- **비즈니스 로직 레이어**: 서비스 패키지
- **데이터 액세스 레이어**: 리포지토리 패키지
